// Suppose that the battle information are coherent and the educator has the permission of create a battle in that tournament
frame Create Battle

fontawesome6solid f390 WebApp
participant API Gateway
participant Battle Manager
database Battle DB
participant Mail manager

participantspacing 5

activate WebApp

WebApp->API Gateway: 1: createBattle(battle, id_tournament)
activate API Gateway
API Gateway->Battle Manager: 2: createBattle(battle, id_tournament)
activate Battle Manager

Battle Manager->Battle Manager: 3: checkBattle(battle, id_tournament)

alt valid_content == true && has_educator_permission == true
// Insert Battle
Battle Manager->Battle DB: 4: executeQuery(battle, id_tournament)

activate Battle DB
Battle DB-->Battle Manager: 5: success
deactivate Battle DB

Battle Manager->Mail manager: 6: sendMassMail(users_tournament)
else 
Battle Manager->Battle Manager: error()
end
Battle Manager-->API Gateway: 7: result
API Gateway-->WebApp: 8: result
deactivate API Gateway
